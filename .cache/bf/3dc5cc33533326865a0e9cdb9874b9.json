{"id":"ppom","dependencies":[{"name":"/home/runner/work/the-one-widget/the-one-widget/dist/the-one-widget.esm.js.map","includedInParent":true,"mtime":1593549186217},{"name":"/home/runner/work/the-one-widget/the-one-widget/example/package.json","includedInParent":true,"mtime":1593549149901},{"name":"react","loc":{"line":1,"column":59},"parent":"/home/runner/work/the-one-widget/the-one-widget/dist/the-one-widget.esm.js","resolved":"/home/runner/work/the-one-widget/the-one-widget/node_modules/react/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=require(\"react\"),t=function(t){var r=t.mapView,a=t.modules,n=t.featureLayerId,o=(0,e.useRef)(null),l=(0,e.useState)(0),u=l[0],c=l[1],i=function(e){var t=r.map.layers.find(function(e){return e.id===n});if(\"start\"===e.state&&r.graphics.removeAll(),\"complete\"===e.state&&t){var a=t.createQuery();a.geometry=e.graphic.geometry,t.queryFeatureCount(a).then(function(e){c(e)},function(e){console.log(\"error\",e)})}};return(0,e.useEffect)(function(){r&&a&&(console.log(\"MyWidget:: mapView Ready!\",r),new(0,a[0])({layer:r.graphics,view:r,availableCreateTools:[\"polygon\",\"rectangle\",\"circle\"],container:o.current}).on(\"create\",i))},[r,a,n]),(0,e.createElement)(\"div\",null,(0,e.createElement)(\"div\",{ref:o}),(0,e.createElement)(\"div\",null,\"Intersecting Features: \",u))},r=t;exports.default=r;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":0}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":13}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":20}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":35}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":43}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":56}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":57}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":64}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":68}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":76}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":89}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":91}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":95}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":97}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":105}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":114}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":15},"generated":{"line":1,"column":116}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":15},"generated":{"line":1,"column":125}},{"source":"../src/index.tsx","name":"mapView","original":{"line":6,"column":2},"generated":{"line":1,"column":128}},{"source":"../src/index.tsx","name":"mapView","original":{"line":6,"column":2},"generated":{"line":1,"column":132}},{"source":"../src/index.tsx","name":"mapView","original":{"line":6,"column":2},"generated":{"line":1,"column":134}},{"source":"../src/index.tsx","name":"mapView","original":{"line":6,"column":2},"generated":{"line":1,"column":136}},{"source":"../src/index.tsx","name":"modules","original":{"line":7,"column":2},"generated":{"line":1,"column":144}},{"source":"../src/index.tsx","name":"modules","original":{"line":7,"column":2},"generated":{"line":1,"column":146}},{"source":"../src/index.tsx","name":"modules","original":{"line":7,"column":2},"generated":{"line":1,"column":148}},{"source":"../src/index.tsx","name":"featureLayerId","original":{"line":8,"column":2},"generated":{"line":1,"column":156}},{"source":"../src/index.tsx","name":"featureLayerId","original":{"line":8,"column":2},"generated":{"line":1,"column":158}},{"source":"../src/index.tsx","name":"featureLayerId","original":{"line":8,"column":2},"generated":{"line":1,"column":160}},{"source":"../src/index.tsx","name":"sketchRef","original":{"line":14,"column":8},"generated":{"line":1,"column":175}},{"source":"../src/index.tsx","name":"useRef","original":{"line":14,"column":20},"generated":{"line":1,"column":178}},{"source":"../src/index.tsx","name":null,"original":{"line":14,"column":43},"generated":{"line":1,"column":180}},{"source":"../src/index.tsx","name":null,"original":{"line":14,"column":43},"generated":{"line":1,"column":182}},{"source":"../src/index.tsx","name":null,"original":{"line":14,"column":43},"generated":{"line":1,"column":190}},{"source":"../src/index.tsx","name":"useState","original":{"line":15,"column":66},"generated":{"line":1,"column":196}},{"source":"../src/index.tsx","name":"useState","original":{"line":15,"column":66},"generated":{"line":1,"column":199}},{"source":"../src/index.tsx","name":null,"original":{"line":17,"column":4},"generated":{"line":1,"column":201}},{"source":"../src/index.tsx","name":null,"original":{"line":17,"column":4},"generated":{"line":1,"column":203}},{"source":"../src/index.tsx","name":null,"original":{"line":17,"column":4},"generated":{"line":1,"column":213}},{"source":"../src/index.tsx","name":"intersectingFeatureCount","original":{"line":15,"column":9},"generated":{"line":1,"column":216}},{"source":"../src/index.tsx","name":"intersectingFeatureCount","original":{"line":15,"column":9},"generated":{"line":1,"column":218}},{"source":"../src/index.tsx","name":"intersectingFeatureCount","original":{"line":15,"column":9},"generated":{"line":1,"column":220}},{"source":"../src/index.tsx","name":"setIntersectingFeatureCount","original":{"line":15,"column":35},"generated":{"line":1,"column":223}},{"source":"../src/index.tsx","name":"setIntersectingFeatureCount","original":{"line":15,"column":35},"generated":{"line":1,"column":225}},{"source":"../src/index.tsx","name":"setIntersectingFeatureCount","original":{"line":15,"column":35},"generated":{"line":1,"column":227}},{"source":"../src/index.tsx","name":"drawCreateHandler","original":{"line":19,"column":8},"generated":{"line":1,"column":230}},{"source":"../src/index.tsx","name":null,"original":{"line":19,"column":61},"generated":{"line":1,"column":232}},{"source":"../src/index.tsx","name":"evt","original":{"line":20,"column":4},"generated":{"line":1,"column":241}},{"source":"../src/index.tsx","name":"fl","original":{"line":23,"column":10},"generated":{"line":1,"column":244}},{"source":"../src/index.tsx","name":"fl","original":{"line":23,"column":10},"generated":{"line":1,"column":248}},{"source":"../src/index.tsx","name":"mapView","original":{"line":23,"column":36},"generated":{"line":1,"column":250}},{"source":"../src/index.tsx","name":"map","original":{"line":23,"column":44},"generated":{"line":1,"column":252}},{"source":"../src/index.tsx","name":"layers","original":{"line":23,"column":48},"generated":{"line":1,"column":256}},{"source":"../src/index.tsx","name":"find","original":{"line":23,"column":55},"generated":{"line":1,"column":263}},{"source":"../src/index.tsx","name":null,"original":{"line":24,"column":6},"generated":{"line":1,"column":268}},{"source":"../src/index.tsx","name":"l","original":{"line":24,"column":6},"generated":{"line":1,"column":277}},{"source":"../src/index.tsx","name":"l","original":{"line":24,"column":11},"generated":{"line":1,"column":280}},{"source":"../src/index.tsx","name":"l","original":{"line":24,"column":11},"generated":{"line":1,"column":287}},{"source":"../src/index.tsx","name":"id","original":{"line":24,"column":13},"generated":{"line":1,"column":289}},{"source":"../src/index.tsx","name":"featureLayerId","original":{"line":24,"column":20},"generated":{"line":1,"column":294}},{"source":"../src/index.tsx","name":"evt","original":{"line":33,"column":8},"generated":{"line":1,"column":298}},{"source":"../src/index.tsx","name":null,"original":{"line":28,"column":22},"generated":{"line":1,"column":301}},{"source":"../src/index.tsx","name":"evt","original":{"line":28,"column":8},"generated":{"line":1,"column":311}},{"source":"../src/index.tsx","name":"state","original":{"line":28,"column":12},"generated":{"line":1,"column":313}},{"source":"../src/index.tsx","name":"mapView","original":{"line":29,"column":6},"generated":{"line":1,"column":320}},{"source":"../src/index.tsx","name":"graphics","original":{"line":29,"column":14},"generated":{"line":1,"column":322}},{"source":"../src/index.tsx","name":"removeAll","original":{"line":29,"column":23},"generated":{"line":1,"column":331}},{"source":"../src/index.tsx","name":null,"original":{"line":33,"column":22},"generated":{"line":1,"column":343}},{"source":"../src/index.tsx","name":"evt","original":{"line":33,"column":8},"generated":{"line":1,"column":356}},{"source":"../src/index.tsx","name":"state","original":{"line":33,"column":12},"generated":{"line":1,"column":358}},{"source":"../src/index.tsx","name":"fl","original":{"line":33,"column":36},"generated":{"line":1,"column":365}},{"source":"../src/index.tsx","name":null,"original":{"line":33,"column":40},"generated":{"line":1,"column":367}},{"source":"../src/index.tsx","name":"queryParams","original":{"line":34,"column":12},"generated":{"line":1,"column":368}},{"source":"../src/index.tsx","name":"queryParams","original":{"line":34,"column":12},"generated":{"line":1,"column":372}},{"source":"../src/index.tsx","name":"fl","original":{"line":34,"column":26},"generated":{"line":1,"column":374}},{"source":"../src/index.tsx","name":"createQuery","original":{"line":34,"column":29},"generated":{"line":1,"column":376}},{"source":"../src/index.tsx","name":"queryParams","original":{"line":35,"column":6},"generated":{"line":1,"column":390}},{"source":"../src/index.tsx","name":"geometry","original":{"line":35,"column":18},"generated":{"line":1,"column":392}},{"source":"../src/index.tsx","name":"evt","original":{"line":35,"column":29},"generated":{"line":1,"column":401}},{"source":"../src/index.tsx","name":"graphic","original":{"line":35,"column":33},"generated":{"line":1,"column":403}},{"source":"../src/index.tsx","name":"geometry","original":{"line":35,"column":41},"generated":{"line":1,"column":411}},{"source":"../src/index.tsx","name":"fl","original":{"line":36,"column":6},"generated":{"line":1,"column":420}},{"source":"../src/index.tsx","name":"queryFeatureCount","original":{"line":36,"column":9},"generated":{"line":1,"column":422}},{"source":"../src/index.tsx","name":"queryParams","original":{"line":36,"column":27},"generated":{"line":1,"column":440}},{"source":"../src/index.tsx","name":"then","original":{"line":36,"column":40},"generated":{"line":1,"column":443}},{"source":"../src/index.tsx","name":null,"original":{"line":37,"column":8},"generated":{"line":1,"column":448}},{"source":"../src/index.tsx","name":"result","original":{"line":37,"column":8},"generated":{"line":1,"column":457}},{"source":"../src/index.tsx","name":"setIntersectingFeatureCount","original":{"line":38,"column":10},"generated":{"line":1,"column":460}},{"source":"../src/index.tsx","name":"result","original":{"line":38,"column":38},"generated":{"line":1,"column":462}},{"source":"../src/index.tsx","name":null,"original":{"line":40,"column":8},"generated":{"line":1,"column":466}},{"source":"../src/index.tsx","name":"err","original":{"line":40,"column":8},"generated":{"line":1,"column":475}},{"source":"../src/index.tsx","name":"console","original":{"line":41,"column":10},"generated":{"line":1,"column":478}},{"source":"../src/index.tsx","name":"log","original":{"line":41,"column":18},"generated":{"line":1,"column":486}},{"source":"../src/index.tsx","name":null,"original":{"line":41,"column":22},"generated":{"line":1,"column":490}},{"source":"../src/index.tsx","name":"err","original":{"line":41,"column":31},"generated":{"line":1,"column":498}},{"source":"../src/index.tsx","name":"React","original":{"line":66,"column":4},"generated":{"line":1,"column":505}},{"source":"../src/index.tsx","name":null,"original":{"line":47,"column":12},"generated":{"line":1,"column":512}},{"source":"../src/index.tsx","name":null,"original":{"line":47,"column":12},"generated":{"line":1,"column":514}},{"source":"../src/index.tsx","name":null,"original":{"line":47,"column":12},"generated":{"line":1,"column":516}},{"source":"../src/index.tsx","name":null,"original":{"line":47,"column":12},"generated":{"line":1,"column":527}},{"source":"../src/index.tsx","name":"mapView","original":{"line":48,"column":8},"generated":{"line":1,"column":538}},{"source":"../src/index.tsx","name":"modules","original":{"line":48,"column":19},"generated":{"line":1,"column":541}},{"source":"../src/index.tsx","name":"console","original":{"line":50,"column":6},"generated":{"line":1,"column":545}},{"source":"../src/index.tsx","name":"log","original":{"line":50,"column":14},"generated":{"line":1,"column":553}},{"source":"../src/index.tsx","name":null,"original":{"line":50,"column":18},"generated":{"line":1,"column":557}},{"source":"../src/index.tsx","name":"mapView","original":{"line":50,"column":47},"generated":{"line":1,"column":585}},{"source":"../src/index.tsx","name":null,"original":{"line":55,"column":36},"generated":{"line":1,"column":588}},{"source":"../src/index.tsx","name":"Sketch","original":{"line":55,"column":40},"generated":{"line":1,"column":592}},{"source":"../src/index.tsx","name":"modules","original":{"line":52,"column":23},"generated":{"line":1,"column":594}},{"source":"../src/index.tsx","name":null,"original":{"line":48,"column":28},"generated":{"line":1,"column":596}},{"source":"../src/index.tsx","name":null,"original":{"line":55,"column":47},"generated":{"line":1,"column":600}},{"source":"../src/index.tsx","name":"layer","original":{"line":56,"column":8},"generated":{"line":1,"column":601}},{"source":"../src/index.tsx","name":"mapView","original":{"line":56,"column":15},"generated":{"line":1,"column":607}},{"source":"../src/index.tsx","name":"graphics","original":{"line":56,"column":23},"generated":{"line":1,"column":609}},{"source":"../src/index.tsx","name":"view","original":{"line":57,"column":8},"generated":{"line":1,"column":618}},{"source":"../src/index.tsx","name":"mapView","original":{"line":57,"column":14},"generated":{"line":1,"column":623}},{"source":"../src/index.tsx","name":"availableCreateTools","original":{"line":58,"column":8},"generated":{"line":1,"column":625}},{"source":"../src/index.tsx","name":null,"original":{"line":58,"column":30},"generated":{"line":1,"column":646}},{"source":"../src/index.tsx","name":null,"original":{"line":58,"column":31},"generated":{"line":1,"column":647}},{"source":"../src/index.tsx","name":null,"original":{"line":58,"column":42},"generated":{"line":1,"column":657}},{"source":"../src/index.tsx","name":null,"original":{"line":58,"column":55},"generated":{"line":1,"column":669}},{"source":"../src/index.tsx","name":"container","original":{"line":59,"column":8},"generated":{"line":1,"column":679}},{"source":"../src/index.tsx","name":"sketchRef","original":{"line":59,"column":19},"generated":{"line":1,"column":689}},{"source":"../src/index.tsx","name":"current","original":{"line":59,"column":29},"generated":{"line":1,"column":691}},{"source":"../src/index.tsx","name":"on","original":{"line":62,"column":13},"generated":{"line":1,"column":701}},{"source":"../src/index.tsx","name":null,"original":{"line":62,"column":16},"generated":{"line":1,"column":704}},{"source":"../src/index.tsx","name":"drawCreateHandler","original":{"line":62,"column":26},"generated":{"line":1,"column":713}},{"source":"../src/index.tsx","name":null,"original":{"line":64,"column":5},"generated":{"line":1,"column":718}},{"source":"../src/index.tsx","name":"mapView","original":{"line":64,"column":6},"generated":{"line":1,"column":719}},{"source":"../src/index.tsx","name":"modules","original":{"line":64,"column":15},"generated":{"line":1,"column":721}},{"source":"../src/index.tsx","name":"featureLayerId","original":{"line":64,"column":24},"generated":{"line":1,"column":723}},{"source":"../src/index.tsx","name":"React","original":{"line":66,"column":4},"generated":{"line":1,"column":728}},{"source":"../src/index.tsx","name":null,"original":{"line":66,"column":4},"generated":{"line":1,"column":730}},{"source":"../src/index.tsx","name":null,"original":{"line":66,"column":4},"generated":{"line":1,"column":732}},{"source":"../src/index.tsx","name":null,"original":{"line":66,"column":4},"generated":{"line":1,"column":747}},{"source":"../src/index.tsx","name":null,"original":{"line":66,"column":4},"generated":{"line":1,"column":753}},{"source":"../src/index.tsx","name":"React","original":{"line":67,"column":6},"generated":{"line":1,"column":759}},{"source":"../src/index.tsx","name":null,"original":{"line":67,"column":6},"generated":{"line":1,"column":761}},{"source":"../src/index.tsx","name":null,"original":{"line":67,"column":6},"generated":{"line":1,"column":763}},{"source":"../src/index.tsx","name":null,"original":{"line":67,"column":6},"generated":{"line":1,"column":778}},{"source":"../src/index.tsx","name":null,"original":{"line":67,"column":6},"generated":{"line":1,"column":784}},{"source":"../src/index.tsx","name":"ref","original":{"line":67,"column":11},"generated":{"line":1,"column":785}},{"source":"../src/index.tsx","name":"sketchRef","original":{"line":67,"column":16},"generated":{"line":1,"column":789}},{"source":"../src/index.tsx","name":"React","original":{"line":68,"column":6},"generated":{"line":1,"column":794}},{"source":"../src/index.tsx","name":null,"original":{"line":68,"column":6},"generated":{"line":1,"column":796}},{"source":"../src/index.tsx","name":null,"original":{"line":68,"column":6},"generated":{"line":1,"column":798}},{"source":"../src/index.tsx","name":null,"original":{"line":68,"column":6},"generated":{"line":1,"column":813}},{"source":"../src/index.tsx","name":null,"original":{"line":68,"column":6},"generated":{"line":1,"column":819}},{"source":"../src/index.tsx","name":null,"original":{"line":68,"column":6},"generated":{"line":1,"column":824}},{"source":"../src/index.tsx","name":"intersectingFeatureCount","original":{"line":68,"column":35},"generated":{"line":1,"column":850}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":855}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":857}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":859}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":867}},{"source":"../src/index.tsx","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":875}}],"sources":{"../src/index.tsx":"/// <reference types=\"@types/arcgis-js-api\" />\nimport * as React from 'react';\nimport { useEffect, useState, useRef } from 'react';\n\nexport default ({\n  mapView,\n  modules,\n  featureLayerId,\n}: {\n  mapView: __esri.MapView;\n  modules: any[];\n  featureLayerId: string;\n}) => {\n  const sketchRef = useRef<HTMLDivElement>(null);\n  const [intersectingFeatureCount, setIntersectingFeatureCount] = useState<\n    number\n  >(0);\n\n  const drawCreateHandler: __esri.SketchCreateEventHandler = (\n    evt: __esri.SketchCreateEvent\n  ) => {\n    // Find the feature layer to use:\n    const fl: __esri.FeatureLayer = mapView.map.layers.find(\n      l => l.id === featureLayerId\n    ) as __esri.FeatureLayer;\n\n    // The first time, clear out the grapics in the layer\n    if (evt.state === 'start') {\n      mapView.graphics.removeAll();\n    }\n\n    // When complete, query the feature service for the count.\n    if (evt.state === 'complete' && fl) {\n      const queryParams = fl.createQuery();\n      queryParams.geometry = evt.graphic.geometry;\n      fl.queryFeatureCount(queryParams).then(\n        result => {\n          setIntersectingFeatureCount(result);\n        },\n        err => {\n          console.log('error', err);\n        }\n      );\n    }\n  };\n\n  useEffect(() => {\n    if (mapView && modules) {\n      // JS API MapView is ready - do anything you need to do here!\n      console.log('MyWidget:: mapView Ready!', mapView);\n\n      const [Sketch] = modules;\n\n      // Create the sketch widget:\n      const sketch: __esri.Sketch = new Sketch({\n        layer: mapView.graphics,\n        view: mapView,\n        availableCreateTools: ['polygon', 'rectangle', 'circle'],\n        container: sketchRef.current,\n      });\n\n      sketch.on('create', drawCreateHandler);\n    }\n  }, [mapView, modules, featureLayerId]);\n  return (\n    <div>\n      <div ref={sketchRef}></div>\n      <div>Intersecting Features: {intersectingFeatureCount}</div>\n    </div>\n  );\n};\n"},"lineCount":null}},"error":null,"hash":"cfec1ff94d9ac3ac6601093167feb446","cacheData":{"env":{}}}